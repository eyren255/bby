<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creative Studio ğŸ¨</title>
  <link rel="stylesheet" href="sticker.css" />
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fabric@5.3.0/dist/fabric.min.js"></script>
</head>
<body>
  <a href="../../index.html" class="back-button">ğŸ”™ Back to Menu</a>

  <!-- Audio Elements -->
  <audio id="bgMusic" src="../../assets/audio/bg-music.mp3" autoplay loop muted></audio>
  <audio id="uploadSound" src="../../assets/audio/click.wav" preload="auto"></audio>
  <audio id="frameSound" src="../../assets/audio/win.mp3" preload="auto"></audio>
  <audio id="magicSound" src="../../assets/audio/click.wav" preload="auto"></audio>
  <audio id="crystalSound" src="../../assets/audio/click.wav" preload="auto"></audio>
  
  <div id="floatingHearts"></div>

  <!-- Main App Container -->
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <h1 class="title">ğŸ¨ Creative Studio</h1>
      <p class="subtitle">Upload, decorate, and create amazing memories!</p>
      <div class="header-stats">
        <span class="stat-item">ğŸ“¸ <span id="photoCount">0</span> Photos</span>
        <span class="stat-item">ğŸ¯ <span id="stickerCount">0</span> Stickers</span>
        <span class="stat-item">ğŸ’¾ <span id="saveCount">0</span> Saved</span>
      </div>
    </header>

    <!-- Main Workspace -->
    <div class="workspace">
      <!-- Left Panel - Tools -->
      <div class="tools-panel">
        <!-- Photo Upload Section -->
        <div class="tool-section">
          <h3>ğŸ“· Upload Photo</h3>
          <div class="upload-area">
            <label for="photoInput" class="upload-btn">
              <span class="upload-icon">ğŸ“·</span>
              <span class="upload-text">Choose Photo</span>
            </label>
    <input type="file" id="photoInput" accept="image/*" hidden />
            <div class="upload-info">
              <small>Supports: JPG, PNG, GIF (Max: 10MB)</small>
            </div>
          </div>
          
          <!-- Quick Actions -->
          <div class="quick-actions">
            <button id="cameraBtn" class="quick-btn" title="Take Photo">
              ğŸ“± Camera
            </button>
            <button id="urlBtn" class="quick-btn" title="Load from URL">
              ğŸŒ URL
            </button>
            <button id="sampleBtn" class="quick-btn" title="Sample Photos">
              ğŸ­ Sample
            </button>
          </div>
        </div>

        <!-- Decoration Tools -->
        <div class="tool-section">
          <h3>ğŸ¨ Creative Tools</h3>
          <div class="tool-grid">
            <button class="tool-btn" data-tool="text" title="Add Text">
              <span class="tool-icon">ğŸ“</span>
              <span class="tool-label">Text</span>
            </button>
            <button class="tool-btn" data-tool="draw" title="Freehand Draw">
              <span class="tool-icon">âœï¸</span>
              <span class="tool-label">Draw</span>
            </button>
            <button class="tool-btn" data-tool="sticker" title="Add Stickers">
              <span class="tool-icon">ğŸ¯</span>
              <span class="tool-label">Stickers</span>
            </button>
            <button class="tool-btn" data-tool="filter" title="Apply Filters">
              <span class="tool-icon">ğŸŒˆ</span>
              <span class="tool-label">Filters</span>
            </button>
            <button class="tool-btn" data-tool="shape" title="Add Shapes">
              <span class="tool-icon">ğŸ”·</span>
              <span class="tool-label">Shapes</span>
            </button>
            <button class="tool-btn" data-tool="effect" title="Special Effects">
              <span class="tool-icon">âœ¨</span>
              <span class="tool-label">Effects</span>
            </button>
          </div>
        </div>

        <!-- Photo Frames -->
        <div class="tool-section">
          <h3>ğŸ–¼ï¸ Photo Frames</h3>
          <div class="frame-grid">
            <div class="frame-option" data-frame="none">
              <div class="frame-preview no-frame">ğŸ“·</div>
              <span>No Frame</span>
            </div>
            <div class="frame-option" data-frame="hearts">
              <div class="frame-preview hearts-frame">ğŸ’–</div>
              <span>Hearts</span>
            </div>
            <div class="frame-option" data-frame="flowers">
              <div class="frame-preview flowers-frame">ğŸŒ¸</div>
              <span>Flowers</span>
            </div>
            <div class="frame-option" data-frame="stars">
              <div class="frame-preview stars-frame">â­</div>
              <span>Stars</span>
            </div>
            <div class="frame-option" data-frame="vintage">
              <div class="frame-preview vintage-frame">ğŸ“·</div>
              <span>Vintage</span>
            </div>
            <div class="frame-option" data-frame="polaroid">
              <div class="frame-preview polaroid-frame">ğŸ“·</div>
              <span>Polaroid</span>
            </div>
            <div class="frame-option" data-frame="crystal">
              <div class="frame-preview crystal-frame">ğŸ’</div>
              <span>Crystal</span>
            </div>
            <div class="frame-option" data-frame="magic">
              <div class="frame-preview magic-frame">ğŸ”®</div>
              <span>Magic</span>
            </div>
          </div>
        </div>

        <!-- Stickers & Emojis -->
        <div class="tool-section">
          <h3>ğŸ¯ Stickers & Emojis</h3>
          <div class="sticker-categories">
            <button class="category-btn active" data-category="love">ğŸ’– Love</button>
            <button class="category-btn" data-category="nature">ğŸŒ¿ Nature</button>
            <button class="category-btn" data-category="food">ğŸ• Food</button>
            <button class="category-btn" data-category="animals">ğŸ° Animals</button>
            <button class="category-btn" data-category="objects">ğŸ Objects</button>
          </div>
          <div class="sticker-grid" id="stickerGrid">
            <!-- Love Category (Default) -->
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’–</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’•</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’—</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’“</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’Ÿ</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’Œ</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’‹</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸ’</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸŒ¹</div>
            <div class="sticker-item" draggable="true" data-category="love">ğŸŒº</div>
          </div>
        </div>

        <!-- Color Palette -->
        <div class="tool-section">
          <h3>ğŸ¨ Colors</h3>
          <div class="color-palette">
            <div class="color-option selected" data-color="#ff6b9d" style="background: #ff6b9d;" title="Pink"></div>
            <div class="color-option" data-color="#ffb3d9" style="background: #ffb3d9;" title="Light Pink"></div>
            <div class="color-option" data-color="#ffd700" style="background: #ffd700;" title="Gold"></div>
            <div class="color-option" data-color="#98fb98" style="background: #98fb98;" title="Light Green"></div>
            <div class="color-option" data-color="#87ceeb" style="background: #87ceeb;" title="Sky Blue"></div>
            <div class="color-option" data-color="#dda0dd" style="background: #dda0dd;" title="Plum"></div>
            <div class="color-option" data-color="#f0e68c" style="background: #f0e68c;" title="Khaki"></div>
            <div class="color-option" data-color="#ffa07a" style="background: #ffa07a;" title="Light Salmon"></div>
            <div class="color-option" data-color="#ff6347" style="background: #ff6347;" title="Tomato"></div>
            <div class="color-option" data-color="#32cd32" style="background: #32cd32;" title="Lime Green"></div>
            <div class="color-option" data-color="#4169e1" style="background: #4169e1;" title="Royal Blue"></div>
            <div class="color-option" data-color="#8a2be2" style="background: #8a2be2;" title="Blue Violet"></div>
          </div>
          
          <!-- Custom Color Picker -->
          <div class="custom-color">
            <input type="color" id="customColor" value="#ff6b9d" title="Custom Color">
            <label for="customColor">Custom</label>
          </div>
        </div>

        <!-- Advanced Tools -->
        <div class="tool-section">
          <h3>âš™ï¸ Advanced Tools</h3>
          <div class="advanced-tools">
            <button id="undoBtn" class="advanced-btn" title="Undo Last Action">
              â†©ï¸ Undo
            </button>
            <button id="redoBtn" class="advanced-btn" title="Redo Last Action">
              â†ªï¸ Redo
            </button>
            <button id="cropBtn" class="advanced-btn" title="Crop Image">
              âœ‚ï¸ Crop
            </button>
            <button id="rotateBtn" class="advanced-btn" title="Rotate Image">
              ğŸ”„ Rotate
            </button>
            <button id="flipBtn" class="advanced-btn" title="Flip Image">
              â†”ï¸ Flip
            </button>
            <button id="zoomBtn" class="advanced-btn" title="Zoom Tools">
              ğŸ” Zoom
            </button>
          </div>
        </div>
      </div>

      <!-- Center - Canvas -->
      <div class="canvas-container">
        <div class="canvas-header">
          <div class="canvas-controls">
            <button id="saveBtn" class="action-btn save-btn" title="Save Design">
              ğŸ’¾ Save
            </button>
            <button id="clearBtn" class="action-btn clear-btn" title="Clear Canvas">
              ğŸ—‘ï¸ Clear
            </button>
            <button id="shareBtn" class="action-btn share-btn" title="Share Design">
              ğŸ“¤ Share
            </button>
            <button id="exportBtn" class="action-btn export-btn" title="Export Image">
              ğŸ“¥ Export
            </button>
          </div>
          
          <div class="canvas-info">
            <span id="canvasInfo">Ready to create!</span>
          </div>
        </div>
        
        <div id="canvas" class="canvas">
          <div class="canvas-placeholder">
            <div class="placeholder-icon">ğŸ“·</div>
            <p>Upload a photo to start creating!</p>
            <div class="placeholder-tips">
              <small>ğŸ’¡ Tip: Drag stickers from the left panel</small>
              <small>ğŸ’¡ Tip: Use the drawing tool to add your own art</small>
              <small>ğŸ’¡ Tip: Try different frames for unique looks</small>
            </div>
          </div>
        </div>
        
        <!-- Canvas Tools Overlay -->
        <div class="canvas-tools" id="canvasTools" style="display: none;">
          <button id="zoomInBtn" class="canvas-tool-btn">ğŸ”+</button>
          <button id="zoomOutBtn" class="canvas-tool-btn">ğŸ”-</button>
          <button id="resetZoomBtn" class="canvas-tool-btn">ğŸ”â†º</button>
          <button id="fullscreenBtn" class="canvas-tool-btn">â›¶</button>
        </div>
      </div>

      <!-- Right Panel - Gallery & History -->
      <div class="gallery-panel">
        <h3>ğŸŒŸ Gallery</h3>
        
        <!-- Recent Creations -->
        <div class="gallery-section">
          <h4>ğŸ“¸ Recent Creations</h4>
          <div id="recentCreations" class="recent-grid">
            <div class="gallery-placeholder">
              <div class="placeholder-icon">ğŸŒŸ</div>
              <p>Your creations will appear here</p>
            </div>
          </div>
        </div>
        
        <!-- Templates -->
        <div class="gallery-section">
          <h4>ğŸ¨ Templates</h4>
          <div class="template-grid">
            <div class="template-item" data-template="birthday">
              <div class="template-preview">ğŸ‚</div>
              <span>Birthday</span>
            </div>
            <div class="template-item" data-template="love">
              <div class="template-preview">ğŸ’•</div>
              <span>Love</span>
            </div>
            <div class="template-item" data-template="nature">
              <div class="template-preview">ğŸŒ¿</div>
              <span>Nature</span>
            </div>
            <div class="template-item" data-template="party">
              <div class="template-preview">ğŸ‰</div>
              <span>Party</span>
            </div>
          </div>
        </div>
        
        <!-- Statistics -->
        <div class="gallery-section">
          <h4>ğŸ“Š Statistics</h4>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ“¸</div>
              <div class="stat-info">
                <span class="stat-number" id="totalPhotos">0</span>
                <span class="stat-label">Photos</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ¯</div>
              <div class="stat-info">
                <span class="stat-number" id="totalStickers">0</span>
                <span class="stat-label">Stickers</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ’¾</div>
              <div class="stat-info">
                <span class="stat-number" id="totalSaves">0</span>
                <span class="stat-label">Saved</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">â±ï¸</div>
              <div class="stat-info">
                <span class="stat-number" id="sessionTime">0</span>
                <span class="stat-label">Minutes</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Text Tool Modal -->
  <div id="textModal" class="modal">
    <div class="modal-content text-modal">
      <div class="modal-header">
        <h3>ğŸ“ Add Text</h3>
        <button class="close-btn" id="closeTextModal">âœ•</button>
      </div>
      <div class="text-input-container">
        <input type="text" id="textInput" placeholder="Enter your text..." maxlength="100">
        <div class="text-options">
          <div class="text-option-group">
            <label>Color:</label>
            <input type="color" id="textColor" value="#ff6b9d">
          </div>
          <div class="text-option-group">
            <label>Size:</label>
            <select id="textSize">
              <option value="16">Small</option>
              <option value="24" selected>Medium</option>
              <option value="32">Large</option>
              <option value="48">Extra Large</option>
              <option value="64">Huge</option>
            </select>
          </div>
          <div class="text-option-group">
            <label>Font:</label>
            <select id="textFont">
              <option value="Arial">Arial</option>
              <option value="Times New Roman">Times</option>
              <option value="Courier New">Courier</option>
              <option value="Georgia">Georgia</option>
              <option value="Verdana">Verdana</option>
            </select>
          </div>
        </div>
        <div class="text-effects">
          <button class="effect-btn" data-effect="bold">B</button>
          <button class="effect-btn" data-effect="italic">I</button>
          <button class="effect-btn" data-effect="underline">U</button>
          <button class="effect-btn" data-effect="shadow">S</button>
          <button class="effect-btn" data-effect="outline">O</button>
        </div>
        <button id="addTextBtn" class="add-text-btn">Add Text</button>
      </div>
    </div>
  </div>

  <!-- URL Input Modal -->
  <div id="urlModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸŒ Load from URL</h3>
        <button class="close-btn" id="closeUrlModal">âœ•</button>
      </div>
      <div class="url-input-container">
        <input type="url" id="urlInput" placeholder="Enter image URL..." />
        <button id="loadUrlBtn" class="load-url-btn">Load Image</button>
      </div>
    </div>
  </div>

  <!-- Export Modal -->
  <div id="exportModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“¥ Export Image</h3>
        <button class="close-btn" id="closeExportModal">âœ•</button>
      </div>
      <div class="export-options">
        <div class="export-option">
          <label>Format:</label>
          <select id="exportFormat">
            <option value="png">PNG</option>
            <option value="jpg">JPG</option>
            <option value="webp">WebP</option>
          </select>
        </div>
        <div class="export-option">
          <label>Quality:</label>
          <input type="range" id="exportQuality" min="0.1" max="1" step="0.1" value="0.9">
          <span id="qualityValue">90%</span>
        </div>
        <div class="export-option">
          <label>Size:</label>
          <select id="exportSize">
            <option value="original">Original</option>
            <option value="1080p">1080p</option>
            <option value="720p">720p</option>
            <option value="480p">480p</option>
          </select>
        </div>
        <button id="exportBtn" class="export-btn">Export Image</button>
      </div>
    </div>
  </div>

  <!-- Sample Photos Modal -->
  <div id="sampleModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ­ Sample Photos</h3>
        <button class="close-btn" id="closeSampleModal">âœ•</button>
      </div>
      <div class="sample-grid">
        <div class="sample-item" data-sample="nature">
          <img src="https://picsum.photos/200/200?random=1" alt="Nature">
          <span>Nature</span>
        </div>
        <div class="sample-item" data-sample="city">
          <img src="https://picsum.photos/200/200?random=2" alt="City">
          <span>City</span>
        </div>
        <div class="sample-item" data-sample="people">
          <img src="https://picsum.photos/200/200?random=3" alt="People">
          <span>People</span>
        </div>
        <div class="sample-item" data-sample="abstract">
          <img src="https://picsum.photos/200/200?random=4" alt="Abstract">
          <span>Abstract</span>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="sticker.js"></script>
  <script>
    // ğŸ¶ Tap to play music
    document.body.addEventListener('click', () => {
      const music = document.getElementById("bgMusic");
      if (music && music.paused) {
        music.muted = false;
        music.play().catch(() => {});
      }
    }, { once: true });

    // ğŸ’– Floating hearts
    for (let i = 0; i < 30; i++) {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.style.left = Math.random() * 100 + "%";
      heart.style.animationDelay = Math.random() * 5 + "s";
      document.getElementById("floatingHearts").appendChild(heart);
    }
  </script>
</body>
</html>
