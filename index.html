<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Baby Love - A beautiful love app with games, messages, and romantic features">
  <meta name="keywords" content="love, romance, games, messages, baby love">
  <meta name="author" content="Baby Love App">
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#ff69b4">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Baby Love">
  <meta name="msapplication-TileColor" content="#ff69b4">
  <meta name="msapplication-config" content="/browserconfig.xml">
  
  <!-- PWA Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icons/android-chrome-512x512.png">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  
  <title>Baby Love ❤️</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="features/shared/settings.css">
  <!-- Global Settings System -->
  <script src="features/shared/settings.js"></script>
  <!-- Global Messaging System -->
  <script src="features/message/global-message.js"></script>
  <!-- Supabase Client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="features/message/supabase-config.js"></script>
  <script defer src="script.js"></script>
</head>

<!-- Modular scripts -->
<script type="module" src="./firebase.js"></script>
<script type="module" src="./firebase-upload.js"></script>
<script type="module" src="./password.js"></script>

<body>
  <!-- Header Section -->
  <header class="main-header">
    <div class="header-content">
      <div class="header-text">
        <h1 class="main-title">Welcome, My Honey Bun 💖</h1>
        <p class="main-subtitle">Pick something cute to do today 💕</p>
      </div>
      
      <div class="header-actions">
        <button id="quickMessageBtn" class="quick-message-btn" aria-label="Quick message">
          <span class="quick-message-icon" aria-hidden="true">💌</span>
          <span class="quick-message-text">Quick Message</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Floating Message Notification -->
  <div id="messageNotification" class="message-notification hidden" role="alert" aria-live="polite">
    <div class="notification-content">
      <span class="notification-icon" aria-hidden="true">💌</span>
      <span class="notification-text">New love message!</span>
      <button class="notification-close" aria-label="Close notification">×</button>
    </div>
  </div>

  <!-- Tap to Start Section -->
  <div id="tapToStart" class="tap-overlay" role="button" tabindex="0" aria-label="Tap to start">
    <div class="overlay-content">
      <div class="heart-icon" aria-hidden="true">💖</div>
      <div class="overlay-text">Tap anywhere to begin...</div>
      <div class="tap-hint">✨ Click to start your adventure ✨</div>
    </div>
  </div>

  <!-- Background Music and Sound Effects -->
  <audio id="bgMusic" src="assets/audio/bg-music.mp3" autoplay loop></audio>
  <audio id="clickSound" src="assets/audio/click.wav" preload="auto"></audio>

  <!-- Main Menu -->
  <main class="menu" style="display: none;" role="main">
    <!-- Fun Activities Section -->
    <section class="menu-section" data-category="activities" aria-labelledby="activities-title">
      <div class="section-header">
        <h2 id="activities-title" class="section-title">🎮 Fun Activities</h2>
        <p class="section-description">Let's have some fun together!</p>
      </div>
      <div class="button-grid" role="grid" aria-label="Fun activities">
        <button class="menu-button" onclick="window.location.href='features/quiz/quiz.html'">
          <span class="button-icon">❓</span>
          <span class="button-text">Love Quiz</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/challenge/challenge.html'">
          <span class="button-icon">🎯</span>
          <span class="button-text">Love Challenge</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/memory-match/memory.html'">
          <span class="button-icon">🧠</span>
          <span class="button-text">Memory Match</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/dress-bunny/dress.html'">
          <span class="button-icon">👗</span>
          <span class="button-text">Dress Bunny</span>
        </button>
      </div>
    </section>

    <!-- Love & Romance Section -->
    <section class="menu-section" data-category="romance" aria-labelledby="romance-title">
      <div class="section-header">
        <h2 id="romance-title" class="section-title">💕 Love & Romance</h2>
        <p class="section-description">Special moments just for us</p>
      </div>
      <div class="button-grid" role="grid" aria-label="Romance features">
        <button class="menu-button" onclick="window.location.href='features/hug/hug.html'">
          <span class="button-icon">🤗</span>
          <span class="button-text">Virtual Hug</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/fortune/fortune.html'">
          <span class="button-icon">🔮</span>
          <span class="button-text">Love Fortune</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/message/message.html'">
          <span class="button-icon">💌</span>
          <span class="button-text">Send Message</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/sticker-wall/sticker.html'">
          <span class="button-icon">🏷️</span>
          <span class="button-text">Sticker Wall</span>
        </button>
      </div>
    </section>

    <!-- Memories & Stories Section -->
    <section class="menu-section" data-category="memories" aria-labelledby="memories-title">
      <div class="section-header">
        <h2 id="memories-title" class="section-title">📖 Memories & Stories</h2>
        <p class="section-description">Relive our beautiful moments together</p>
      </div>
      <div class="button-grid" role="grid" aria-label="Memory features">
        <button class="menu-button" onclick="window.location.href='features/story/story.html'">
          <span class="button-icon">📖</span>
          <span class="button-text">Our Story</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/scoreboard/scoreboard.html'">
          <span class="button-icon">🏆</span>
          <span class="button-text">Scoreboard</span>
        </button>
        
        <button class="menu-button" onclick="window.location.href='features/unlock-note/unlock.html'">
          <span class="button-icon">🔓</span>
          <span class="button-text">Secret Note</span>
        </button>
        
        <!-- Settings Button -->
        <button class="menu-button openSettingsBtn" onclick="openSettings()">
          <span class="button-icon">⚙️</span>
          <span class="button-text">Settings</span>
        </button>

        <!-- What's New Button -->
        <button class="menu-button" onclick="showWhatsNew()">
          <span class="button-icon">🆕</span>
          <span class="button-text">What's New</span>
        </button>
      </div>
    </section>
  </main>

  <!-- Password Modal -->
  <div id="passwordModal" class="modal" role="dialog" aria-labelledby="password-title" aria-describedby="password-description">
    <div class="modal-content">
      <h3 id="password-title" class="modal-title">🔐 Enter Password</h3>
      <p id="password-description" class="modal-description">Enter the password to continue 💖</p>
      <form class="password-form" onsubmit="return false;">
        <div class="password-input-container">
          <input type="password" id="passwordInput" placeholder="Password..." aria-label="Enter password" required />
          <button type="submit" id="submitPassword" class="submit-btn">Unlock</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal hidden">
    <!-- Settings content will be loaded here -->
  </div>

  <!-- Changelog Modal -->
  <div id="changelogModal" class="modal hidden">
    <div class="modal-content changelog-content">
      <div class="modal-header">
        <h2>🆕 What's New</h2>
        <button class="modal-close" onclick="hideWhatsNew()">×</button>
      </div>
      <div class="modal-body">
        <div class="changelog-section">
          <h3>🎨 Version 2.0.0 - Modern UI Overhaul</h3>
          <div class="changelog-item">
            <h4>🏆 Scoreboard Redesign</h4>
            <ul>
              <li>Modern glassmorphism design with enhanced animations</li>
              <li>Smart storage strategy (cloud-first with localStorage fallback)</li>
              <li>Achievement system with unlockable badges</li>
              <li>Real-time stats from memory match games</li>
              <li>Difficulty tabs for Easy/Medium/Hard levels</li>
            </ul>
          </div>
          
          <div class="changelog-item">
            <h4>🧠 Memory Match Improvements</h4>
            <ul>
              <li>Faster card flips for better responsiveness</li>
              <li>Mobile optimization with compact status cards</li>
              <li>Progress bar for visual tracking</li>
              <li>Performance calculation system</li>
              <li>Cloud sync when internet is available</li>
            </ul>
          </div>
          
          <div class="changelog-item">
            <h4>⚙️ Settings System Overhaul</h4>
            <ul>
              <li>Simplified interface with card-based layout</li>
              <li>Theme support (light/dark mode)</li>
              <li>Audio controls for all sound effects</li>
              <li>Layout customization options</li>
              <li>Data management features</li>
            </ul>
          </div>
          
          <div class="changelog-item">
            <h4>📱 Mobile Enhancements</h4>
            <ul>
              <li>Responsive design for all screen sizes</li>
              <li>Touch-friendly interfaces</li>
              <li>Performance optimizations</li>
              <li>Compact layouts for small screens</li>
            </ul>
          </div>
          
          <div class="changelog-item">
            <h4>🎮 Quiz Feature Enhancement</h4>
            <ul>
              <li>Modern card-based design</li>
              <li>Dark mode support</li>
              <li>Progress tracking indicators</li>
              <li>Responsive mobile layout</li>
            </ul>
          </div>
        </div>
        
        <div class="changelog-section">
          <h3>🔧 Technical Improvements</h3>
          <ul>
            <li>Comprehensive error handling throughout</li>
            <li>Optimized loading and animations</li>
            <li>Browser compatibility improvements</li>
            <li>Better code organization and modularity</li>
          </ul>
        </div>
        
        <div class="changelog-section">
          <h3>🐛 Bug Fixes</h3>
          <ul>
            <li>Fixed scoreboard loading issues</li>
            <li>Resolved memory match card flip timing</li>
            <li>Fixed mobile layout problems</li>
            <li>Corrected settings synchronization</li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn" onclick="hideWhatsNew()">Got it! 💕</button>
      </div>
    </div>
  </div>
</body>
</html>
