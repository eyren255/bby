<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta Information -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For My Baby 💕</title>
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#ff69b4" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="For My Baby" />
  <meta name="msapplication-TileColor" content="#ff69b4" />
  <meta name="msapplication-config" content="/browserconfig.xml" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-152x152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-180x180.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="assets/icons/icon-167x167.png" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16x16.png" />
  
  <!-- Styles and Scripts -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="features/shared/settings.css" />
  <script defer src="script.js"></script>
  <!-- Global Settings System -->
  <script src="features/shared/global-settings.js"></script>
  <!-- Supabase Client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="features/message/supabase-config.js"></script>
  <!-- PWA Installation Script -->
  <script src="pwa-install.js"></script>
</head>
<!-- Modular scripts -->
<script type="module" src="./firebase.js"></script>
<script type="module" src="./firebase-upload.js"></script>
<script type="module" src="./password.js"></script>

<body>
  <!-- Header Section -->
  <header class="main-header">
    <h1 class="main-title">Welcome, My Honey Bun 💖</h1>
    <p class="main-subtitle">Pick something cute to do today 💕</p>
    <!-- Quick Message Button -->
    <button id="quickMessageBtn" class="quick-message-btn" aria-label="Quick Message">
      <span class="quick-message-icon">💌</span>
      <span class="quick-message-text">Quick Message</span>
    </button>
    <!-- Settings Button -->
    <button id="openSettingsBtn" class="settings-btn" aria-label="Settings">
      <span class="settings-icon">⚙️</span>
    </button>
    <!-- PWA Install Button -->
    <button id="installPwaBtn" class="pwa-install-btn" aria-label="Install App" style="display: none;">
      <span class="pwa-install-icon">⬇️</span>
      <span class="pwa-install-text">Install App</span>
    </button>
  </header>

  <!-- Floating Message Notification -->
  <div id="messageNotification" class="message-notification hidden">
    <div class="notification-content">
      <span class="notification-icon">💌</span>
      <span class="notification-text">New love message!</span>
      <button class="notification-close">×</button>
    </div>
  </div>

  <!-- Tap to Start Section -->
  <div id="tapToStart" class="tap-overlay">
    <div class="overlay-content">
      <div class="heart-icon">💖</div>
      <div class="overlay-text">Tap anywhere to begin...</div>
      <div class="tap-hint">✨ Click to start your adventure ✨</div>
    </div>
  </div>

  <!-- Background Music and Sound Effects -->
  <audio id="bgMusic" src="assets/audio/bg-music.mp3" autoplay loop></audio>
  <audio id="clickSound" src="assets/audio/click.wav" preload="auto"></audio>

  <!-- Main Menu -->
  <main class="menu" style="display: none;">
    <!-- Cute Things to Play Section -->
    <section class="menu-section" data-category="games">
      <div class="section-header">
        <h2 class="section-title">💘 Cute Things to Play</h2>
        <p class="section-description">Fun activities just for us</p>
      </div>
      <div class="button-grid">
        <a href="features/hug/hug.html" class="menu-button btn-hug" aria-label="Virtual Hug">
          <span class="button-icon">🤗</span>
          <span class="button-text">Virtual Hug</span>
        </a>
        <a href="features/quiz/quiz.html" class="menu-button btn-quiz" aria-label="Know Me Quiz">
          <span class="button-icon">❓</span>
          <span class="button-text">Know Me Quiz</span>
        </a>
        <a href="features/memory-match/memory.html" class="menu-button btn-memory" aria-label="Memory Match">
          <span class="button-icon">🃏</span>
          <span class="button-text">Memory Match</span>
        </a>
        <a href="features/dress-bunny/dress.html" class="menu-button btn-bunny" aria-label="Dress the Bunny">
          <span class="button-icon">🧸</span>
          <span class="button-text">Dress the Bunny</span>
        </a>
      </div>
    </section>

    <!-- Random & Fun Section -->
    <section class="menu-section" data-category="fun">
      <div class="section-header">
        <h2 class="section-title">🔮 Random & Fun</h2>
        <p class="section-description">Surprise yourself with something special</p>
      </div>
      <div class="button-grid">
        <a href="features/challenge/challenge.html" class="menu-button btn-challenge" aria-label="Love Challenge Generator">
          <span class="button-icon">💕</span>
          <span class="button-text">Love Challenge Generator</span>
        </a>
        <a href="features/fortune/fortune.html" class="menu-button btn-fortune" aria-label="Daily Fortune">
          <span class="button-icon">🔮</span>
          <span class="button-text">Daily Fortune</span>
        </a>
      </div>
    </section>

    <!-- Sweet Memories Section -->
    <section class="menu-section" data-category="memories">
      <div class="section-header">
        <h2 class="section-title">📖 Sweet Memories</h2>
        <p class="section-description">Relive our beautiful moments together</p>
      </div>
      <div class="button-grid">
        <a href="features/story/story.html" class="menu-button btn-story" aria-label="Our Story">
          <span class="button-icon">📖</span>
          <span class="button-text">Our Story</span>
        </a>
        <a href="features/message/message.html" class="menu-button btn-message" aria-label="Send Me a Message">
          <span class="button-icon">💌</span>
          <span class="button-text">Send Me a Message</span>
        </a>
        <a href="features/scoreboard/scoreboard.html" class="menu-button btn-scoreboard" aria-label="Scoreboard">
          <span class="button-icon">🏆</span>
          <span class="button-text">Scoreboard</span>
        </a>
      </div>
    </section>

    <!-- Surprise Section (Hidden by Default) -->
    <section class="menu-section surprise hidden" data-category="surprise">
      <div class="section-header">
        <h2 class="section-title">🎁 Surprise</h2>
        <p class="section-description">Special treats just for you</p>
      </div>
      <div class="button-grid">
        <a href="features/unlock-note/unlock.html" class="menu-button btn-note" aria-label="Secret Love Note">
          <span class="button-icon">🔐</span>
          <span class="button-text">Secret Love Note</span>
        </a>
        <a href="features/sticker-wall/sticker.html" class="menu-button btn-sticker" aria-label="Sticker Wall">
          <span class="button-icon">🎀</span>
          <span class="button-text">Sticker Wall</span>
        </a>
      </div>
    </section>

    <!-- Reveal Button -->
    <div class="reveal-container">
      <button id="revealBtn" class="reveal-button" aria-label="Reveal surprise section">
        <span class="reveal-icon">👀</span>
        <span class="reveal-text">I want a surprise!</span>
      </button>
    </div>
  </main>

  <!-- Password Modal -->
  <div id="passwordModal" class="modal">
    <div class="modal-content">
      <h3 class="modal-title">🔐 Enter Password</h3>
      <p class="modal-description">Enter the password to continue 💖</p>
      <div class="password-input-container">
        <input type="password" id="passwordInput" placeholder="Password..." aria-label="Enter password" />
        <button id="submitPassword" class="submit-btn">Unlock</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal settings-modal">
    <div class="modal-content settings-content">
      <div class="settings-header">
        <h3 class="modal-title">⚙️ Settings</h3>
        <button id="closeSettingsBtn" class="close-settings-btn" aria-label="Close settings">
          <span class="close-icon">×</span>
        </button>
      </div>
      
      <div class="settings-tabs">
        <button class="tab-btn active" data-tab="theme">🎨 Theme</button>
        <button class="tab-btn" data-tab="sound">🔊 Sound</button>
        <button class="tab-btn" data-tab="display">📱 Display</button>
      </div>

      <div class="settings-content">
        <!-- Theme Tab -->
        <div id="themeTab" class="tab-content active">
          <div class="setting-group">
            <h4>Theme Mode</h4>
            <div class="theme-options">
              <label class="theme-option">
                <input type="radio" name="theme" value="light" checked>
                <span class="theme-preview light-theme">Light Mode</span>
              </label>
              <label class="theme-option">
                <input type="radio" name="theme" value="dark">
                <span class="theme-preview dark-theme">Dark Mode</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Sound Tab -->
        <div id="soundTab" class="tab-content">
          <div class="setting-group">
            <h4>Background Music</h4>
            <label class="toggle-switch">
              <input type="checkbox" id="bgMusicToggle" checked>
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-group">
            <h4>Sound Effects</h4>
            <label class="toggle-switch">
              <input type="checkbox" id="soundEffectsToggle" checked>
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-group">
            <h4>Volume</h4>
            <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
            <span id="volumeValue">50%</span>
          </div>
        </div>

        <!-- Display Tab -->
        <div id="displayTab" class="tab-content">
          <div class="setting-group">
            <h4>Font Size</h4>
            <select id="fontSizeSelect" class="setting-select">
              <option value="small">Small</option>
              <option value="medium" selected>Medium</option>
              <option value="large">Large</option>
            </select>
          </div>
          <div class="setting-group">
            <h4>Animation Speed</h4>
            <select id="animationSpeedSelect" class="setting-select">
              <option value="fast">Fast</option>
              <option value="normal" selected>Normal</option>
              <option value="slow">Slow</option>
            </select>
          </div>
        </div>
      </div>

      <div class="settings-footer">
        <button id="saveSettingsBtn" class="save-settings-btn">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>
</body>
</html>
